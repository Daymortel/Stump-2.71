

//Generated by Kenshin
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Stump.Core.IO;

namespace Stump.DofusProtocol.Types
{
    public class CharacterCharacteristicsInformations
    {
        public const short Id = 5200;
        public virtual short TypeId
        {
            get { return Id; }
        }
        
        public ulong experience;
        public ulong experienceLevelFloor;
        public ulong experienceNextLevelFloor;
        public ulong experienceBonusLimit;
        public ulong kamas;
        public Types.ActorExtendedAlignmentInformations alignmentInfos;
        public ushort criticalHitWeapon;
        public IEnumerable<Types.CharacterCharacteristic> characteristics;
        public IEnumerable<Types.SpellModifierMessage> spellModifiers;
        public double probationTime;
        
        public CharacterCharacteristicsInformations()
        {
        }
        
        public CharacterCharacteristicsInformations(ulong experience, ulong experienceLevelFloor, ulong experienceNextLevelFloor, ulong experienceBonusLimit, ulong kamas, Types.ActorExtendedAlignmentInformations alignmentInfos, ushort criticalHitWeapon, IEnumerable<Types.CharacterCharacteristic> characteristics, IEnumerable<Types.SpellModifierMessage> spellModifiers, double probationTime)
        {
            this.experience = experience;
            this.experienceLevelFloor = experienceLevelFloor;
            this.experienceNextLevelFloor = experienceNextLevelFloor;
            this.experienceBonusLimit = experienceBonusLimit;
            this.kamas = kamas;
            this.alignmentInfos = alignmentInfos;
            this.criticalHitWeapon = criticalHitWeapon;
            this.characteristics = characteristics;
            this.spellModifiers = spellModifiers;
            this.probationTime = probationTime;
        }
        
        public virtual void Serialize(IDataWriter writer)
        {
            writer.WriteVarULong(experience);
            writer.WriteVarULong(experienceLevelFloor);
            writer.WriteVarULong(experienceNextLevelFloor);
            writer.WriteVarULong(experienceBonusLimit);
            writer.WriteVarULong(kamas);
            alignmentInfos.Serialize(writer);
            writer.WriteVarUShort(criticalHitWeapon);
            writer.WriteShort((short)characteristics.Count());
            foreach (var objectToSend in characteristics)
            {
                 writer.WriteShort(objectToSend.TypeId);
                 objectToSend.Serialize(writer);
            }
            writer.WriteShort((short)spellModifiers.Count());
            foreach (var objectToSend in spellModifiers)
            {
                 objectToSend.Serialize(writer);
            }
            writer.WriteDouble(probationTime);
        }
        
        public virtual void Deserialize(IDataReader reader)
        {
            experience = reader.ReadVarULong();
            experienceLevelFloor = reader.ReadVarULong();
            experienceNextLevelFloor = reader.ReadVarULong();
            experienceBonusLimit = reader.ReadVarULong();
            kamas = reader.ReadVarULong();
            alignmentInfos = new Types.ActorExtendedAlignmentInformations();
            alignmentInfos.Deserialize(reader);
            criticalHitWeapon = reader.ReadVarUShort();
            var characteristicsCount = reader.ReadUShort();
            var characteristics_ = new Types.CharacterCharacteristic[characteristicsCount];
            for (var characteristicsIndex = 0; characteristicsIndex < characteristicsCount; characteristicsIndex++)
            {
                 var objectToAdd = Types.ProtocolTypeManager.GetInstance<Types.CharacterCharacteristic>(reader.ReadShort());
                 objectToAdd.Deserialize(reader);
                 characteristics_[characteristicsIndex] = objectToAdd;
            }
            characteristics = characteristics_;
            var spellModifiersCount = reader.ReadUShort();
            var spellModifiers_ = new Types.SpellModifierMessage[spellModifiersCount];
            for (var spellModifiersIndex = 0; spellModifiersIndex < spellModifiersCount; spellModifiersIndex++)
            {
                 var objectToAdd = new Types.SpellModifierMessage();
                 objectToAdd.Deserialize(reader);
                 spellModifiers_[spellModifiersIndex] = objectToAdd;
            }
            spellModifiers = spellModifiers_;
            probationTime = reader.ReadDouble();
        }
    }
}


//Generated by Kenshin
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Stump.Core.IO;

namespace Stump.DofusProtocol.Types
{
    public class ChallengeInformation
    {
        public const short Id = 1254;
        public virtual short TypeId
        {
            get { return Id; }
        }
        
        public uint challengeId;
        public IEnumerable<Types.ChallengeTargetInformation> targetsList;
        public uint dropBonus;
        public uint xpBonus;
        public sbyte state;
        
        public ChallengeInformation()
        {
        }
        
        public ChallengeInformation(uint challengeId, IEnumerable<Types.ChallengeTargetInformation> targetsList, uint dropBonus, uint xpBonus, sbyte state)
        {
            this.challengeId = challengeId;
            this.targetsList = targetsList;
            this.dropBonus = dropBonus;
            this.xpBonus = xpBonus;
            this.state = state;
        }
        
        public virtual void Serialize(IDataWriter writer)
        {
            writer.WriteVarUInt(challengeId);
            writer.WriteShort((short)targetsList.Count());
            foreach (var objectToSend in targetsList)
            {
                 writer.WriteShort(objectToSend.TypeId);
                 objectToSend.Serialize(writer);
            }
            writer.WriteVarUInt(dropBonus);
            writer.WriteVarUInt(xpBonus);
            writer.WriteSByte(state);
        }
        
        public virtual void Deserialize(IDataReader reader)
        {
            challengeId = reader.ReadVarUInt();
            var targetsListCount = reader.ReadUShort();
            var targetsList_ = new Types.ChallengeTargetInformation[targetsListCount];
            for (var targetsListIndex = 0; targetsListIndex < targetsListCount; targetsListIndex++)
            {
                 var objectToAdd = Types.ProtocolTypeManager.GetInstance<Types.ChallengeTargetInformation>(reader.ReadShort());
                 objectToAdd.Deserialize(reader);
                 targetsList_[targetsListIndex] = objectToAdd;
            }
            targetsList = targetsList_;
            dropBonus = reader.ReadVarUInt();
            xpBonus = reader.ReadVarUInt();
            state = reader.ReadSByte();
        }
    }
}
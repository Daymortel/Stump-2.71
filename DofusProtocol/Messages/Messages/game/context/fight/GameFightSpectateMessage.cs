

//Generated by Kenshin
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Stump.Core.IO;
using Stump.DofusProtocol.Types;

namespace Stump.DofusProtocol.Messages
{
    public class GameFightSpectateMessage : Message
    {
        public const uint Id = 6788;
        public override uint MessageId => Id;
        
        public IEnumerable<Types.FightDispellableEffectExtendedInformations> effects;
        public IEnumerable<Types.GameActionMark> marks;
        public ushort gameTurn;
        public int fightStart;
        public IEnumerable<Types.GameFightEffectTriggerCount> fxTriggerCounts;
        
        public GameFightSpectateMessage()
        { }
        
        public GameFightSpectateMessage(IEnumerable<Types.FightDispellableEffectExtendedInformations> effects, IEnumerable<Types.GameActionMark> marks, ushort gameTurn, int fightStart, IEnumerable<Types.GameFightEffectTriggerCount> fxTriggerCounts)
        {
            this.effects = effects;
            this.marks = marks;
            this.gameTurn = gameTurn;
            this.fightStart = fightStart;
            this.fxTriggerCounts = fxTriggerCounts;
        }
        
        public override void Serialize(IDataWriter writer)
        {
            writer.WriteShort((short)effects.Count());
            foreach (var objectToSend in effects)
            {
                 objectToSend.Serialize(writer);
            }
            writer.WriteShort((short)marks.Count());
            foreach (var objectToSend in marks)
            {
                 objectToSend.Serialize(writer);
            }
            writer.WriteVarUShort(gameTurn);
            writer.WriteInt(fightStart);
            writer.WriteShort((short)fxTriggerCounts.Count());
            foreach (var objectToSend in fxTriggerCounts)
            {
                 objectToSend.Serialize(writer);
            }
        }
        
        public override void Deserialize(IDataReader reader)
        {
            var effectsCount = reader.ReadUShort();
            var effects_ = new Types.FightDispellableEffectExtendedInformations[effectsCount];
            for (var effectsIndex = 0; effectsIndex < effectsCount; effectsIndex++)
            {
                 var objectToAdd = new Types.FightDispellableEffectExtendedInformations();
                 objectToAdd.Deserialize(reader);
                 effects_[effectsIndex] = objectToAdd;
            }
            effects = effects_;
            var marksCount = reader.ReadUShort();
            var marks_ = new Types.GameActionMark[marksCount];
            for (var marksIndex = 0; marksIndex < marksCount; marksIndex++)
            {
                 var objectToAdd = new Types.GameActionMark();
                 objectToAdd.Deserialize(reader);
                 marks_[marksIndex] = objectToAdd;
            }
            marks = marks_;
            gameTurn = reader.ReadVarUShort();
            fightStart = reader.ReadInt();
            var fxTriggerCountsCount = reader.ReadUShort();
            var fxTriggerCounts_ = new Types.GameFightEffectTriggerCount[fxTriggerCountsCount];
            for (var fxTriggerCountsIndex = 0; fxTriggerCountsIndex < fxTriggerCountsCount; fxTriggerCountsIndex++)
            {
                 var objectToAdd = new Types.GameFightEffectTriggerCount();
                 objectToAdd.Deserialize(reader);
                 fxTriggerCounts_[fxTriggerCountsIndex] = objectToAdd;
            }
            fxTriggerCounts = fxTriggerCounts_;
        }
    }
}